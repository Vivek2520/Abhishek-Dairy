<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abhishek Dairy & General Store - Your Neighborhood Kirana</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #fefefe;
            color: #333;
            overflow-x: hidden;
        }

        .hero-gradient {
            background: linear-gradient(135deg, #4ade80 0%, #3b82f6 50%, #8b5cf6 100%);
        }

        .card-hover {
            transition: all 0.3s ease;
        }

        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .category-icon {
            transition: transform 0.5s ease;
        }

        .category-icon:hover {
            transform: rotate(15deg) scale(1.1);
        }

        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .pulse-ring {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
            }

            70% {
                transform: scale(1);
                box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
            }

            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
            }
        }

        .sticky-nav {
            backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.95);
        }

        .floating-whatsapp {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        /* Parallax Effect for Hero Section */
        #home {
            will-change: transform;
        }

        /* Removed the image parallax effect */
    </style>
</head>

<body class="bg-gray-50">
    <!-- Header & Navigation -->
    <header class="sticky top-0 z-50 sticky-nav shadow-md">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="bg-green-500 p-2 rounded-lg">
                        <i class="fas fa-store text-white text-2xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">Abhishek Dairy & General Store</h1>
                        <p class="text-sm text-gray-600">Dhotti, Waidhan, Singrauli</p>
                    </div>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="#home" class="text-gray-700 hover:text-blue-600 font-medium">Home</a>
                    <a href="#products" class="text-gray-700 hover:text-blue-600 font-medium">Products</a>
                    <a href="#categories" class="text-gray-700 hover:text-blue-600 font-medium">Categories</a>
                    <a href="#contact" class="text-gray-700 hover:text-blue-600 font-medium">Contact</a>
                </nav>
                <div class="flex items-center gap-4">
                    <button id="headerCartBtn" class="relative text-gray-700 hover:text-blue-600 transition">
                        <i class="fas fa-shopping-cart text-2xl"></i>
                        <span id="headerCartCount"
                            class="absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center hidden">0</span>
                    </button>
                    <button class="md:hidden text-gray-700" id="menuToggle">
                        <i class="fas fa-bars text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div class="hidden md:hidden bg-white shadow-lg" id="mobileMenu">
            <div class="flex flex-col py-4 px-4 space-y-4">
                <a href="#home" class="text-gray-700 hover:text-blue-600 font-medium py-2">Home</a>
                <a href="#products" class="text-gray-700 hover:text-blue-600 font-medium py-2">Products</a>
                <a href="#categories" class="text-gray-700 hover:text-blue-600 font-medium py-2">Categories</a>
                <a href="#contact" class="text-gray-700 hover:text-blue-600 font-medium py-2">Contact</a>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="home" class="py-16 md:py-24 text-white"
        style="will-change: transform; background-image: url('Website.jpeg'); background-size: cover; background-position: center; background-repeat: no-repeat;">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row items-center justify-between">
                <div class="md:w-1/2 mb-10 md:mb-0">
                    <h2 class="text-5xl md:text-6xl font-bold mb-4 text-black">FRESH DAIRY & DAILY ESSENTIALS DELEVERED
                    </h2>
                    <p class="text-3xl mb-8 opacity-90 text-black">Your Trusted Neighborhood Kirana Store Providing
                        Quality
                        Products with Home Delivery in Waidhan, Singrauli.</p>
                    <p class="text-2xl mb-6 opacity-90 text-black">Save Big on Your Favorite Brands</p>
                    <div class="flex flex-wrap gap-4">
                        <a href="tel:7879355368"
                            class="bg-red-600 border border-white text-white font-bold py-3 px-6 rounded-full hover:bg-white hover:text-blue-600 transition">
                            <i class="fas fa-phone-alt mr-2"></i>Call Now
                        </a>
                        <a href="https://maps.app.goo.gl/82n2kAmGKj7sizYS6" target="_blank"
                            class="bg-red-600 border border-white text-white font-bold py-3 px-6 rounded-full hover:bg-white hover:text-blue-600 transition">
                            <i class="fas fa-map-marker-alt mr-2"></i>Visit Store
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Products API Section -->
    <section id="products" class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">Our Products</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">Fresh dairy products, groceries, snacks, beverages, and all
                    daily essentials. Prices updated in real-time.</p>
            </div>
            <div class="mb-8 flex justify-center">
                <div class="relative w-full max-w-md">
                    <input type="text" id="searchProduct" placeholder="Search for products..."
                        class="w-full p-4 pl-12 rounded-xl border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <i class="fas fa-search absolute left-4 top-5 text-gray-400"></i>
                </div>
            </div>
            <div class="mb-8 flex justify-center space-x-4 overflow-x-auto py-2">
                <button class="filter-btn px-4 py-2 rounded-full bg-blue-600 text-white font-medium"
                    data-category="all">All Items</button>
                <button
                    class="filter-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-blue-100"
                    data-category="dairy">Dairy</button>
                <button
                    class="filter-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-blue-100"
                    data-category="grocery">Groceries</button>
                <button
                    class="filter-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-blue-100"
                    data-category="beverages">Beverages</button>
                <button
                    class="filter-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 font-medium hover:bg-blue-100"
                    data-category="snacks">Snacks</button>
            </div>
            <div id="loadingSpinner" class="flex justify-center my-12">
                <div class="loading-spinner h-12 w-12"></div>
            </div>
            <div id="productsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- Products will be loaded via API -->
            </div>
            <div id="noProducts" class="hidden text-center py-12">
                <i class="fas fa-search text-5xl text-gray-300 mb-4"></i>
                <h3 class="text-2xl font-bold text-gray-500">No products found</h3>
                <p class="text-gray-400">Try searching for a different item</p>
            </div>
        </div>
    </section>

    <!-- Categories -->
    <section id="categories" class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">Shop by Category</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">Everything you need for your home, neatly organized</p>
            </div>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6 justify-items-center">
                <div class="bg-blue-50 rounded-2xl p-6 text-center card-hover w-full">
                    <div
                        class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 category-icon">
                        <i class="fas fa-cheese text-blue-600 text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-gray-800">Fresh Dairy</h3>
                    <p class="text-sm text-gray-600 mt-2">Milk, Curd, Paneer, Ghee</p>
                </div>

                <div class="bg-yellow-50 rounded-2xl p-6 text-center card-hover w-full">
                    <div
                        class="bg-yellow-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 category-icon">
                        <i class="fas fa-wine-bottle text-yellow-600 text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-gray-800">Beverages</h3>
                    <p class="text-sm text-gray-600 mt-2">Coldrinks(Sprite, soda), water Bottel</p>
                </div>
                <div class="bg-purple-50 rounded-2xl p-6 text-center card-hover w-full">
                    <div
                        class="bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 category-icon">
                        <i class="fas fa-cookie text-purple-600 text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-gray-800">Snacks</h3>
                    <p class="text-sm text-gray-600 mt-2">Chips, Biscuits, Cookies</p>
                </div>
                <div class="bg-green-50 rounded-2xl p-6 text-center card-hover w-full">
                    <div
                        class="bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 category-icon">
                        <i class="fas fa-ice-cream text-green-600 text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-gray-800">Ice Cream</h3>
                    <p class="text-sm text-gray-600 mt-2">Cone, Bars, Tubes, Sundea</p>
                </div>
                <div class="bg-red-50 rounded-2xl p-6 text-center card-hover w-full">
                    <div
                        class="bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 category-icon">
                        <i class="fas fa-utensils text-red-600 text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-gray-800">Kitchen Essentials</h3>
                    <p class="text-sm text-gray-600 mt-2">Spices, Oil, Flour, Rice</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 bg-gray-900 text-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Visit Our Store</h2>
                <p class="text-gray-300 max-w-2xl mx-auto">We're here to serve you with a smile and quality products</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <div>
                    <div class="bg-gray-800 rounded-2xl p-8 shadow-xl">
                        <h3 class="text-2xl font-bold mb-6">Store Information</h3>
                        <div class="space-y-6">
                            <div class="flex items-start">
                                <div class="bg-blue-500 p-3 rounded-lg mr-4">
                                    <i class="fas fa-map-marker-alt text-white"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-lg mb-1">Address</h4>
                                    <p class="text-gray-300">Abhishek Dairy And General Store, Dhotti, Sai College Road,
                                        Waidhan, Singrauli, Madhya Pradesh, Pin Code: 486886</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="bg-green-500 p-3 rounded-lg mr-4">
                                    <i class="fas fa-phone-alt text-white"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-lg mb-1">Phone Number</h4>
                                    <p class="text-gray-300 text-xl font-bold">7879355368, 7000755886</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <div class="bg-yellow-500 p-3 rounded-lg mr-4">
                                    <i class="fas fa-clock text-white"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-lg mb-1">Opening Hours</h4>
                                    <p class="text-gray-300">Monday - Sunday: 8:00 AM - 10:00 PM</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="bg-gray-800 rounded-2xl p-8 shadow-xl h-full">
                        <h3 class="text-2xl font-bold mb-6">Quick Contact</h3>
                        <p class="text-gray-300 mb-6">Have questions or need home delivery? Reach out to us!</p>
                        <div class="space-y-4">
                            <a href="tel:7879355368"
                                class="block bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-xl text-center transition">
                                <i class="fas fa-phone-alt mr-2"></i>Call Now for Enquiries
                            </a>
                            <a href="https://wa.me/917879355368" target="_blank"
                                class="block bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-6 rounded-xl text-center transition">
                                <i class="fab fa-whatsapp mr-2"></i>WhatsApp Order
                            </a>
                            <div class="bg-gray-700 rounded-xl p-4 text-center">
                                <p class="text-gray-300">Home delivery available within 5km radius. Minimum order: ‚Çπ299
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 border-t border-gray-700 py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="bg-green-500 p-2 rounded-lg">
                            <i class="fas fa-store text-white"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white">Abhishek Dairy & General Store</h3>
                    </div>
                    <p class="text-gray-400">Serving Waidhan with quality products since january 2025</p>
                </div>
                <div class="flex space-x-6">
                    <a href="tel:7879355368" class="text-gray-400 hover:text-white">
                        <i class="fas fa-phone-alt text-xl"></i>
                    </a>
                    <a href="https://wa.me/917879355368" target="_blank" class="text-gray-400 hover:text-white">
                        <i class="fab fa-whatsapp text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white">
                        <i class="fas fa-map-marker-alt text-xl"></i>
                    </a>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>¬© 2026 Abhishek Dairy & General Store. All rights reserved.</p>
                <p class="mt-2 text-sm">Designed with ‚ù§Ô∏è for our valued customers</p>
            </div>
        </div>
    </footer>

    <!-- Floating WhatsApp -->
    <a href="https://wa.me/917879355368" target="_blank" class="fixed bottom-6 right-6 z-40 floating-whatsapp">
        <div class="bg-green-500 text-white p-4 rounded-full shadow-2xl pulse-ring">
            <i class="fab fa-whatsapp text-3xl"></i>
        </div>
    </a>

    <!-- Back to Top -->
    <button id="backToTop" class="fixed bottom-6 left-6 z-40 bg-blue-600 text-white p-3 rounded-full shadow-2xl hidden">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- Cart Modal - Enhanced -->
    <div id="cartModal" class="modal">
        <div class="modal-content">
            <div
                class="bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-t-2xl flex justify-between items-center sticky top-0 shadow-lg">
                <div>
                    <h2 class="text-2xl font-bold">üõí Your Cart</h2>
                    <p class="text-blue-100 text-sm" id="cartItemCount">0 items</p>
                </div>
                <button id="closeCart"
                    class="text-3xl hover:text-blue-200 transition w-10 h-10 flex items-center justify-center">&times;</button>
            </div>

            <div id="cartItemsList" class="p-6 space-y-4">
                <!-- Cart items will be displayed here -->
            </div>

            <div id="emptyCartMessage" class="p-12 text-center">
                <i class="fas fa-shopping-cart text-6xl text-gray-300 mb-4"></i>
                <h3 class="text-2xl font-bold text-gray-500 mb-2">Your cart is empty</h3>
                <p class="text-gray-400 mb-4">Add products to get started!</p>
                <button onclick="document.getElementById('cartModal').classList.remove('active')"
                    class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                    Continue Shopping
                </button>
            </div>

            <!-- Cart Summary Section -->
            <div id="cartSummarySection" class="hidden border-t border-gray-300 bg-gray-50 p-6 space-y-4">
                <div class="bg-white rounded-lg p-4 space-y-2">
                    <div class="flex justify-between">
                        <span class="text-gray-600">Subtotal:</span>
                        <span class="font-semibold text-gray-800" id="subtotal">‚Çπ0</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Delivery Charge:</span>
                        <span class="font-semibold text-gray-800">‚Çπ50</span>
                    </div>
                    <div class="border-t pt-2 flex justify-between items-center">
                        <span class="font-bold text-lg">Total Amount:</span>
                        <span class="font-bold text-2xl text-green-600" id="totalAmount">‚Çπ0</span>
                    </div>
                </div>

                <!-- Customer Details Form -->
                <div class="bg-white rounded-lg p-4 space-y-3">
                    <h3 class="font-bold text-gray-800 mb-3">üìã Delivery Details</h3>
                    <input type="text" id="customerName" placeholder="üë§ Your Full Name"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <input type="tel" id="customerPhone" placeholder="üì± Phone Number"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <textarea id="deliveryAddress" placeholder="üìç Complete Delivery Address (with Landmark)" rows="3"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"></textarea>
                </div>

                <!-- Order Button -->
                <button id="orderWhatsappBtn"
                    class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-6 rounded-lg transition flex items-center justify-center gap-3 shadow-lg hover:shadow-xl">
                    <i class="fab fa-whatsapp text-2xl"></i>
                    <span>Place Order on WhatsApp</span>
                </button>

                <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-800">
                    <i class="fas fa-info-circle mr-2"></i>
                    We will confirm your order within 5 minutes via WhatsApp
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mobile Menu Toggle
        const menuToggle = document.getElementById('menuToggle');
        const mobileMenu = document.getElementById('mobileMenu');

        menuToggle.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Close mobile menu when clicking a link
        document.querySelectorAll('#mobileMenu a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });

        // Back to Top Button
        const backToTop = document.getElementById('backToTop');

        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTop.classList.remove('hidden');
            } else {
                backToTop.classList.add('hidden');
            }
        });

        backToTop.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // API Integration for Products
        const productsContainer = document.getElementById('productsContainer');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const noProducts = document.getElementById('noProducts');
        const searchProduct = document.getElementById('searchProduct');
        const filterButtons = document.querySelectorAll('.filter-btn');

        // API Configuration
        const API_BASE_URL = 'http://localhost:5000';
        const API_URL = `${API_BASE_URL}/api/products`;

        // Check API connection status
        function checkAPIConnection() {
            fetch(`${API_BASE_URL}/api/health`)
                .then(response => response.json())
                .then(data => {
                    console.log('‚úÖ API Server Connected:', data);
                })
                .catch(error => {
                    console.warn('‚ö†Ô∏è API Server Not Running. Using mock data.');
                    console.log('To start the server, run: npm start');
                });
        }

        // Fallback mock products if API fails
        const mockProducts = [
            { id: 1, name: "Amul Taaza Milk (1L)", price: "‚Çπ80", category: "dairy", image: "https://assets.hyperpure.com/data/images/products/7414110ab7cd6787cfe03678bf8789e6.jpg", stock: "In Stock", description: "Fresh Amul Taaza milk" },
            { id: 2, name: "Amul Butter (500g)", price: "‚Çπ150", category: "dairy", image: "https://nagabazaar.com/cdn/shop/files/Amul-Pasteurised-Butter-500-g.jpg?v=1747519853", stock: "In Stock", description: "Pure Amul butter" },
            { id: 3, name: "Basmati Rice (5kg)", price: "‚Çπ450", category: "grocery", image: "https://5.imimg.com/data5/SELLER/Default/2022/10/YY/GR/CS/11279306/image012.png", stock: "In Stock", description: "Premium basmati rice" },
            { id: 4, name: "Sunflower Oil (1L)", price: "‚Çπ180", category: "grocery", image: "https://instamart-media-assets.swiggy.com/swiggy/image/upload/fl_lossy,f_auto,q_auto/NI_CATALOG/IMAGES/CIW/2025/8/8/f1a45371-e3a0-40bc-a00e-ea5e408dfd55_1766_1.png", stock: "Low Stock", description: "Pure sunflower oil" },
            { id: 5, name: "Coca-Cola (2L)", price: "‚Çπ90", category: "beverages", image: "https://images.unsplash.com/photo-1622483767028-3f66f32aef97?ixlib=rb-4.0.3", stock: "In Stock", description: "Refreshing Coca-Cola" },
            { id: 6, name: "Lays Chips (100g)", price: "‚Çπ20", category: "snacks", image: "https://pictures.grocerapps.com/original/grocerapp-lays-french-cheese-potato-chips-6544d6f87f309.jpeg", stock: "In Stock", description: "Crispy Lays chips" },
            { id: 7, name: "Fresh Curd (500g)", price: "‚Çπ50", category: "dairy", image: "https://cdn.grofers.com/da/cms-assets/cms/product/2107cdc3-8d54-41fb-a7ee-89d8573b9f06.jpg", stock: "In Stock", description: "Fresh homemade curd" },
            { id: 8, name: "Aashirvaad Atta (5kg)", price: "‚Çπ300", category: "grocery", image: "https://epkmart.com/wp-content/uploads/2020/12/aashirvaad-aata.png", stock: "In Stock", description: "Quality wheat flour" },
            { id: 9, name: "Sprite (1L)", price: "‚Çπ55", category: "beverages", image: "https://assets.hyperpure.com/data/images/products/37cec6dc-e8d5-4df2-8341-f5c3bb98c3af.png", stock: "In Stock", description: "Refreshing Sprite" }
        ];

        // Load products from API or fallback to mock data
        function loadProducts() {
            console.log('Loading products from:', API_URL);

            fetch(API_URL, {
                method: 'GET',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                }
            })
                .then(response => {
                    console.log('Response status:', response.status);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('‚úÖ Products loaded from API:', data);
                    loadingSpinner.classList.add('hidden');
                    displayProducts(data.data || data || []);
                })
                .catch(error => {
                    console.error('‚ùå API Error:', error);
                    console.log('üì¶ Using mock data instead...');
                    loadingSpinner.classList.add('hidden');
                    displayProducts(mockProducts);
                });
        }

        // Display products
        function displayProducts(products) {
            productsContainer.innerHTML = '';

            if (!products || products.length === 0) {
                noProducts.classList.remove('hidden');
                console.log('No products to display');
                return;
            }

            noProducts.classList.add('hidden');
            console.log(`Displaying ${products.length} products`);

            products.forEach(product => {
                const stockColor = product.stock === "In Stock" ? "text-green-600" : "text-red-600";
                const stockBg = product.stock === "In Stock" ? "bg-green-100" : "bg-red-100";
                const priceDisplay = typeof product.price === 'number' ? `‚Çπ${product.price}` : product.price;

                const productCard = document.createElement('div');
                productCard.className = 'bg-white rounded-2xl shadow-lg overflow-hidden card-hover';
                productCard.innerHTML = `
                    <div class="relative h-48 overflow-hidden">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover" onerror="this.src='https://via.placeholder.com/300x300?text=Product'">
                        <div class="absolute top-4 right-4 ${stockBg} ${stockColor} text-xs font-bold px-3 py-1 rounded-full">
                            ${product.stock}
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-gray-800 text-lg mb-2">${product.name}</h3>
                        <div class="flex justify-between items-center mt-4">
                            <div>
                                <span class="text-2xl font-bold text-blue-600">${priceDisplay}</span>
                            </div>
                            <button class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition" onclick="addToCart('${product.name}', '${priceDisplay}')">
                                <i class="fas fa-shopping-cart mr-2"></i>Add
                            </button>
                        </div>
                    </div>
                `;
                productsContainer.appendChild(productCard);
            });
        }

        // Filter and search functionality
        let currentCategory = 'all';
        let currentSearch = '';

        // Add event listeners to filter buttons
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Remove active state from all buttons
                filterButtons.forEach(btn => {
                    btn.classList.remove('bg-blue-600', 'text-white');
                    btn.classList.add('bg-gray-200', 'text-gray-700');
                });

                // Add active state to clicked button
                button.classList.remove('bg-gray-200', 'text-gray-700');
                button.classList.add('bg-blue-600', 'text-white');

                currentCategory = button.dataset.category;
                filterProducts();
            });
        });

        // Add event listener to search input
        searchProduct.addEventListener('input', (e) => {
            currentSearch = e.target.value;
            filterProducts();
        });

        function filterProducts() {
            let params = new URLSearchParams();

            if (currentCategory !== 'all') {
                params.append('category', currentCategory);
            }

            if (currentSearch.trim() !== '') {
                params.append('search', currentSearch);
            }

            const url = `${API_URL}?${params.toString()}`;
            console.log('Filtering products:', url);

            fetch(url)
                .then(response => {
                    if (!response.ok) throw new Error('API not responding');
                    return response.json();
                })
                .then(data => {
                    console.log('‚úÖ Filtered results:', data);
                    displayProducts(data.data || data || []);
                })
                .catch(error => {
                    console.warn('‚ö†Ô∏è API Error, filtering mock data:', error.message);
                    // Filter mock data instead
                    let filtered = [...mockProducts];
                    if (currentCategory !== 'all') {
                        filtered = filtered.filter(p => p.category === currentCategory);
                    }
                    if (currentSearch.trim() !== '') {
                        const searchTerm = currentSearch.toLowerCase();
                        filtered = filtered.filter(p =>
                            p.name.toLowerCase().includes(searchTerm)
                        );
                    }
                    displayProducts(filtered);
                });
        }

        // ===== ENHANCED SHOPPING CART FUNCTIONALITY =====
        const cart = {
            items: [],

            add(product) {
                const existingItem = this.items.find(item => item.id === product.id);
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    this.items.push({
                        ...product,
                        quantity: 1
                    });
                }
                this.save();
                this.updateUI();
                this.showNotification(`‚úÖ ${product.name} added to cart!`);
            },

            remove(productId) {
                this.items = this.items.filter(item => item.id !== productId);
                this.save();
                this.updateUI();
            },

            updateQuantity(productId, quantity) {
                const item = this.items.find(item => item.id === productId);
                if (item) {
                    item.quantity = Math.max(1, quantity);
                    if (item.quantity === 0) {
                        this.remove(productId);
                    } else {
                        this.save();
                        this.updateUI();
                    }
                }
            },

            getTotal() {
                return this.items.reduce((total, item) => {
                    const price = typeof item.price === 'number' ? item.price : parseInt(item.price.replace('‚Çπ', ''));
                    return total + (price * item.quantity);
                }, 0);
            },

            save() {
                localStorage.setItem('cart', JSON.stringify(this.items));
            },

            load() {
                const saved = localStorage.getItem('cart');
                this.items = saved ? JSON.parse(saved) : [];
            },

            updateUI() {
                const cartItemsList = document.getElementById('cartItemsList');
                const emptyCartMessage = document.getElementById('emptyCartMessage');
                const cartSummarySection = document.getElementById('cartSummarySection');
                const headerCartCount = document.getElementById('headerCartCount');
                const cartItemCount = document.getElementById('cartItemCount');

                // Update header cart badge
                if (this.items.length > 0) {
                    headerCartCount.textContent = this.items.length;
                    headerCartCount.classList.remove('hidden');
                    cartItemCount.textContent = `${this.items.length} item${this.items.length > 1 ? 's' : ''}`;
                } else {
                    headerCartCount.classList.add('hidden');
                }

                // Update cart items display
                cartItemsList.innerHTML = '';

                if (this.items.length === 0) {
                    emptyCartMessage.classList.remove('hidden');
                    cartSummarySection.classList.add('hidden');
                } else {
                    emptyCartMessage.classList.add('hidden');
                    cartSummarySection.classList.remove('hidden');

                    this.items.forEach(item => {
                        const price = typeof item.price === 'number' ? item.price : parseInt(item.price.replace('‚Çπ', ''));
                        const itemTotal = price * item.quantity;

                        const itemElement = document.createElement('div');
                        itemElement.className = 'bg-white rounded-lg p-4 flex gap-4 shadow-sm hover:shadow-md transition border border-gray-200';
                        itemElement.innerHTML = `
                            <img src="${item.image}" alt="${item.name}" class="w-20 h-20 object-cover rounded-lg bg-gray-100">
                            <div class="flex-1">
                                <h4 class="font-bold text-gray-800 text-sm md:text-base">${item.name}</h4>
                                <p class="text-green-600 font-bold text-lg mt-1">‚Çπ${price}</p>
                                <div class="flex items-center gap-2 mt-2 bg-gray-100 rounded-lg p-1 w-fit">
                                    <button class="bg-gray-300 hover:bg-gray-400 text-gray-700 w-6 h-6 rounded transition flex items-center justify-center text-sm font-bold"
                                        onclick="cart.updateQuantity(${item.id}, ${item.quantity - 1})">‚àí</button>
                                    <span class="w-6 text-center font-bold text-gray-800">${item.quantity}</span>
                                    <button class="bg-gray-300 hover:bg-gray-400 text-gray-700 w-6 h-6 rounded transition flex items-center justify-center text-sm font-bold"
                                        onclick="cart.updateQuantity(${item.id}, ${item.quantity + 1})">+</button>
                                </div>
                            </div>
                            <div class="flex flex-col items-end justify-between">
                                <span class="font-bold text-gray-800 text-lg">‚Çπ${itemTotal}</span>
                                <button class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded transition text-sm"
                                    onclick="cart.remove(${item.id})">
                                    <i class="fas fa-trash"></i> Remove
                                </button>
                            </div>
                        `;
                        cartItemsList.appendChild(itemElement);
                    });

                    // Update totals
                    const subtotal = this.getTotal();
                    const delivery = 50;
                    const total = subtotal + delivery;

                    document.getElementById('subtotal').textContent = `‚Çπ${subtotal}`;
                    document.getElementById('totalAmount').textContent = `‚Çπ${total}`;
                }
            },

            showNotification(message) {
                const notification = document.createElement('div');
                notification.className = 'fixed top-24 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center gap-2 animate-pulse';
                notification.innerHTML = `${message}`;
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 2000);
            },

            generateWhatsAppMessage() {
                const name = document.getElementById('customerName').value.trim();
                const phone = document.getElementById('customerPhone').value.trim();
                const address = document.getElementById('deliveryAddress').value.trim();

                if (!name) {
                    alert('‚ùå Please enter your name');
                    return null;
                }
                if (!phone || phone.length < 10) {
                    alert('‚ùå Please enter a valid phone number');
                    return null;
                }
                if (!address) {
                    alert('‚ùå Please enter delivery address');
                    return null;
                }

                let message = `*üõí Abhishek Dairy & General Store - New Order*\n\n`;
                message += `*üë§ Customer Details:*\n`;
                message += `Name: ${name}\n`;
                message += `Phone: ${phone}\n`;
                message += `Address: ${address}\n`;
                message += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n`;

                message += `*üì¶ Order Items:*\n`;
                this.items.forEach((item, index) => {
                    const price = typeof item.price === 'number' ? item.price : parseInt(item.price.replace('‚Çπ', ''));
                    const itemTotal = price * item.quantity;
                    message += `${index + 1}. ${item.name}\n   Qty: ${item.quantity} √ó ‚Çπ${price} = ‚Çπ${itemTotal}\n`;
                });

                const subtotal = this.getTotal();
                const delivery = 50;
                const total = subtotal + delivery;

                message += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;
                message += `*üí∞ Bill Summary:*\n`;
                message += `Subtotal: ‚Çπ${subtotal}\n`;
                message += `Delivery: ‚Çπ${delivery}\n`;
                message += `*Total: ‚Çπ${total}*\n`;
                message += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n`;
                message += `‚úÖ Thank you for ordering!\nWe will confirm within 5 minutes.`;

                return message;
            },

            sendOrder() {
                const subtotal = this.getTotal();
                const delivery = 50;
                const total = subtotal + delivery;

                if (total <= 299) {
                    alert('‚ùå Minimum order value is ‚Çπ299. Please add more products to reach the minimum order value.');
                    return;
                }

                const message = this.generateWhatsAppMessage();
                if (message) {
                    const encodedMessage = encodeURIComponent(message);
                    const whatsappUrl = `https://wa.me/917879355368?text=${encodedMessage}`;
                    window.open(whatsappUrl, '_blank');

                    // Clear cart and close modal
                    setTimeout(() => {
                        this.items = [];
                        this.save();
                        this.updateUI();
                        document.getElementById('cartModal').classList.remove('active');
                        alert('‚úÖ Order sent successfully!');
                    }, 500);
                }
            }
        };

        // Cart Modal Controls
        const headerCartBtn = document.getElementById('headerCartBtn');
        const cartModal = document.getElementById('cartModal');
        const closeCart = document.getElementById('closeCart');
        const orderWhatsappBtn = document.getElementById('orderWhatsappBtn');

        headerCartBtn.addEventListener('click', () => {
            cartModal.classList.add('active');
        });

        closeCart.addEventListener('click', () => {
            cartModal.classList.remove('active');
        });

        cartModal.addEventListener('click', (e) => {
            if (e.target === cartModal) {
                cartModal.classList.remove('active');
            }
        });

        orderWhatsappBtn.addEventListener('click', () => {
            cart.sendOrder();
        });

        // Updated Add to Cart function
        function addToCart(productName, price) {
            const product = mockProducts.find(p => p.name === productName);
            if (product) {
                cart.add(product);
            }
        }

        // Parallax Effect for Hero Section
        const heroSection = document.getElementById('home');

        window.addEventListener('scroll', () => {
            const scrollY = window.pageYOffset;
            heroSection.style.transform = `translateY(${scrollY * 0.08}px)`;
        });

        window.addEventListener('mousemove', (e) => {
            const mouseX = (e.clientX - window.innerWidth / 2) * 0.02;
            const mouseY = (e.clientY - window.innerHeight / 2) * 0.02;
            heroSection.style.transform = `translate(${mouseX}px, ${mouseY}px)`;
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Page loaded. Checking API connection...');
            cart.load();
            cart.updateUI();
            checkAPIConnection();
            loadProducts();
        });
    </script>
</body>